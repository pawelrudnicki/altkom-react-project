(this.webpackJsonpsofomo=this.webpackJsonpsofomo||[]).push([[0],{47:function(e,t,n){},52:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(17),c=n.n(s),i=n(10),o=n(11),d=n(13),u=n(12),l=(n(46),n(47),n(14)),j=n(26);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"79.186.213.87";return function(t,n){return t({type:"GET_IP_ADDRESS_PENDING"}),fetch("http://api.ipstack.com/".concat(e,"?access_key=81e4b051be5d5c421efad3cc439b7a2a&format=1")).then((function(e){return e.json()})).then((function(e){return t({type:"GET_IP_ADDRESS_FULFILLED",payload:e})})).catch((function(){return t({type:"GET_IP_ADDRESS_REJECTED"})}))}}var p=n(59),b=n(37),f=(n(51),n(52),n(58)),O=n(63),m=n(64),g=n(6),v=n.n(g),x=n(2),y=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.cords;return!e||v.a.isEmpty(e)?"No history.":Object(x.jsxs)(f.a,{style:{height:"100%",width:"100%"},center:e,zoom:13,scrollWheelZoom:!1,children:[Object(x.jsx)(O.a,{attribution:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(x.jsx)(m.a,{center:e})]})}}]),n}(r.a.Component),C=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.informations;return Object(x.jsx)("div",{className:"border-info",children:e.map((function(e){return Object(x.jsx)("div",{className:"d-flex flex-column",children:Object(x.jsxs)("span",{children:[Object(x.jsxs)("strong",{children:[e.name,": "]}),e.value]})})}))})}}]),n}(r.a.Component),E=n(60),D=n(62),S=n(40);var _=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.values,n=e.handleChange,a=e.handleBlur,r=e.touched,s=e.errors,c=e.handleSubmit;return Object(x.jsxs)(E.a,{onSubmit:c,children:[Object(x.jsx)(E.a.Label,{children:"Search location:"}),Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)(E.a.Control,{name:"address",onBlur:a,onChange:n,value:t.address,type:"text",placeholder:"Please provide IP address"}),Object(x.jsx)(D.a,{variant:"primary",type:"submit",children:"Submit"})]}),s.address&&r.address&&Object(x.jsx)(E.a.Text,{className:"text-danger",children:s.address})]})}}]),n}(r.a.Component),A=Object(l.c)(Object(S.a)({mapPropsToValues:function(){return{address:""}},validate:function(e){var t={};return e.address||(t.address="Required."),/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e.address)||(t.address="Wrong address."),t},handleSubmit:function(e,t){var n=t.props;n.changeAddress(e.address);var a={address:e.address,cords:n.currentCords};n.informations.forEach((function(e){return a[e.name]=e.value})),sessionStorage.setItem("".concat((new Date).getTime()),JSON.stringify(a))}}))(_),I=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.historyData,t=void 0===e?[]:e;return Object(x.jsx)("div",{children:t.map((function(e,t){return Object(x.jsxs)("div",{className:"d-flex",children:[new Date(e.time).toDateString(),Object(x.jsxs)("span",{children:["Address: ",Object(x.jsx)("strong",{children:e.address})]})]},t)}))})}}]),n}(r.a.Component);var N=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).changeAddress=function(t){e.props.dispatch(h(t))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.changeAddress()}},{key:"getCurrentInformationLocation",value:function(){var e=this.props.addressInformation;return[{name:"City",value:v.a.get(e,"city","")},{name:"Continent",value:v.a.get(e,"continent_name","")},{name:"Country",value:v.a.get(e,"country_name","")},{name:"Region",value:v.a.get(e,"region_name","")},{name:"Zip",value:v.a.get(e,"zip","")}]}},{key:"getCurrentCoords",value:function(){var e=this.props.addressInformation;return[v.a.get(e,"latitude",0),v.a.get(e,"longitude",0)]}},{key:"getHistory",value:function(){return Object.keys(sessionStorage)<2?[]:Object.entries(sessionStorage).slice().sort((function(e,t){return+e[0]-+t[0]})).map((function(e){var t=JSON.parse(e[1]);return{time:+e[0],address:v.a.get(t,"address",""),cords:v.a.get(t,"cords",""),informations:[{name:"City",value:v.a.get(t,"City","")},{name:"Continent",value:v.a.get(t,"Continent","")},{name:"Country",value:v.a.get(t,"Country","")},{name:"Region",value:v.a.get(t,"Region","")},{name:"Zip",value:v.a.get(t,"Zip","")}]}}))}},{key:"render",value:function(){if(this.props.loading)return null;var e=this.getCurrentCoords(),t=this.getCurrentInformationLocation(),n=this.getHistory(),a=v.a.get(v.a.last(n),"informations",[]);return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(p.a,{children:[Object(x.jsx)(b.a,{xs:12,lg:2,className:"p-4",children:Object(x.jsx)(I,{historyData:n})}),Object(x.jsxs)(b.a,{xs:12,lg:10,children:[Object(x.jsxs)(p.a,{className:"d-flex justify-content-center p-4",children:[Object(x.jsx)(b.a,{xs:12,lg:4,children:Object(x.jsx)(y,{cords:e})}),Object(x.jsx)(b.a,{xs:12,lg:4,children:Object(x.jsx)(C,{informations:t})})]}),Object(x.jsx)(p.a,{className:"d-flex justify-content-center mt-4 mb-4",children:Object(x.jsx)(b.a,{xs:4,children:Object(x.jsx)(A,{informations:t,changeAddress:this.changeAddress,currentCords:e})})}),Object(x.jsxs)(p.a,{className:"d-flex justify-content-center p-4",children:[Object(x.jsx)(b.a,{xs:12,lg:4,children:Object(x.jsx)(y,{cords:v.a.get(v.a.last(n),"cords",[])})}),Object(x.jsx)(b.a,{xs:12,lg:4,children:Object(x.jsx)(C,{informations:a})})]})]})]})})}}]),n}(r.a.Component),R=Object(l.c)(Object(j.b)((function(e){return{addressInformation:e.ip.ipResponse,loading:e.ip.fetchingAddress}})))(N),k=n(38),P=n(39),T=n.n(P),L=n(8),G={ipResponse:"",fetchingAddress:!1};var w=Object(l.b)({ip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_IP_ADDRESS_PENDING":return Object(L.a)(Object(L.a)({},e),{},{ipResponse:"",fetchingAddress:!0});case"GET_IP_ADDRESS_FULFILLED":return Object(L.a)(Object(L.a)({},e),{},{ipResponse:t.payload,fetchingAddress:!1});case"GET_IP_ADDRESS_REJECTED":return Object(L.a)(Object(L.a)({},e),{},{ipResponse:"",fetchingAddress:!1});default:return e}}});c.a.render(Object(x.jsx)(j.a,{store:Object(l.d)(w,Object(l.a)(k.a,T.a)),children:Object(x.jsx)(R,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.0be17dd8.chunk.js.map